<div class='container px-5 px-sm-0'>
  <div class='row'>
    <div class='col-md-3'>
      <h2>User info</h2>
      <%= render 'info', user: @user %>
      <h2 class="mt-3">New book</h2>
      <%= render 'books/form', book: @book %>
    </div>
    <div class='col-md-8 offset-md-1'>
      <h2>Books</h2>
      <%= render 'books/index', books: @books %>
      <h2>Maps</h2>
      <div id="map"></div>
      <script type="text/javascript">
          function initMap() {
              var test = {lat: gon.user.latitude, lng: gon.user.longitude};
              var map = new google.maps.Map(document.getElementById('map'), {
                  zoom: 15,
                  center: test
              });
              var transitLayer = new google.maps.TransitLayer();
              transitLayer.setMap(map);

              var contentString = `住所: ${gon.user.address}`;
              var infowindow = new google.maps.InfoWindow({
                  content: contentString
              });
              var marker = new google.maps.Marker({
                  position: test,
                  map: map,
                  title: contentString
              });

              marker.addListener('click', function () {
                  infowindow.open(map, marker);
              });
          }
      </script>

      <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&key=<%= ENV['GOOGLE_API_KEY'] %>&callback=initMap"></script>
      <style>
          #map {
              height: 200px;
              width: 70%;
          }
      </style>
    </div>
  </div>
</div>
